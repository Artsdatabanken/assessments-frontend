@model RL2021ViewModel
@using static Assessments.Frontend.Web.Infrastructure.Constants
@{
    var AllCategories = ViewBag.AllCategories;
}
@functions{
    string CategoryCheck(string name, string[] element, string value)
    {
        return $"name={name} value={value}" + (element.Contains(value) ? " checked=checked" : String.Empty);
    }
}

<div class="search-and-filter">
    <form asp-action="Index2021" method="get">
        <!-- View controls -->
        <div class="controls">
            <button id="listview" name="view" value="list" class="material-icons" type="submit">list</button>
            <button id="gridview" name="view" value="grid" class="material-icons" type="submit">grid_on </button>
            <button id="statsview" name="view" value="stat" class="material-icons" type="submit">bar_chart </button>
        </div>
        <!-- Search -->
        <div>
            <div class="list-search">
                <input asp-for="Name" placeholder="Søk i vitenskapelig navn" />
                <button class="btn" type="submit">
                    <span class="material-icons">
                        search
                    </span>
                    Søk
                </button>
                <button class="btn" type="submit" name="Export" value="true">Eksport</button>
            </div>
            <div class="filters">
                <input asp-for="Collapsible.Filters" class="collapse_checkbox" id="show_filters" type="checkbox" />
                <label class="show_filters" for="show_filters"><h3 class="toggle_filter">Filter</h3></label>
                <div class="filters_scrollable">
                    <div class="filter_groups">
                        <input type="reset" value="@SearchAndFilter.ResetAllFilters" />
                        <div class="filter_group">
                            <label for="show_area"><h4>@SearchAndFilter.SearchChooseArea</h4></label>
                            <input asp-for="Collapsible.Area" class="collapse_checkbox" id="show_area" type="checkbox" />
                            <div class="filter_area">
                                <ul>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" @CategoryCheck("Area", Model.Area, "N")  onclick="this.form.submit();" />Norge
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" @CategoryCheck("Area", Model.Area, "S")  onclick="this.form.submit();" />Svalbard
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="filter_group">
                            <label for="show_category"><h4>@SearchAndFilter.SearchChooseCategory</h4></label>
                            <input asp-for="Collapsible.Category" class="collapse_checkbox" id="show_category" type="checkbox" />
                            <div class="filter_category" >
                                <ul>
                                    @foreach (var category in AllCategories)
                                    {
                                        <li class="checkbox" style="margin-top: 0;">
                                            <label class="checkbox" style="margin-top: 5px; margin-left: 15px; cursor: pointer; font-weight: normal">
                                                <input type="checkbox" @CategoryCheck("Category", Model.Category, category) onclick="this.form.submit();" onclick="this.form.submit();"/>@category
                                            </label>
                                        </li>
                                    }
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Redlisted" onclick="this.form.submit();" />@SearchAndFilter.ChooseRedlisted
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Endangered" onclick="this.form.submit();" />@SearchAndFilter.ChooseEndangered
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="filter_group">
                            <label for="show_region"><h4>Regioner og havområder</h4></span>
                            <input asp-for="Collapsible.Region" type="checkbox" class="collapse_checkbox" id="show_region" />
                            <div class="filter_region">
                                <ul>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Agder" onclick="this.form.submit();" />Agder
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Innlandet" onclick="this.form.submit();" />Innlandet
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.VestFoldTelemark" onclick="this.form.submit();" />Vestfold og Telemark
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.MoreRomsdal" onclick="this.form.submit();" />Møre og Romsdal
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Nordland" onclick="this.form.submit();" />Nordland
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Rogaland" onclick="this.form.submit();" />Rogaland
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.TromsFinnmark" onclick="this.form.submit();" />Troms og Finnmark
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Trondelag" onclick="this.form.submit();" />Trøndelag
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Vestland" onclick="this.form.submit();" />Vestland
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.VikenOslo" onclick="this.form.submit();" />Viken og Oslo
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Regions.Havomroder" onclick="this.form.submit();" />Havområder
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="filter_group">
                            <label for="show_european_population"><h4>Andel av europeisk populasjon</h4></span>
                            <input asp-for="Collapsible.EuropeanPopulation" type="checkbox" class="collapse_checkbox" id="show_european_population" />
                            <div class="filter_european_population">
                                <ul>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="EuropeanPopLt5" onclick="this.form.submit();" />&lt; 5 %
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="EuropeanPopRange5To25" onclick="this.form.submit();" />5 - 25 %
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="EuropeanPopRange25To50" onclick="this.form.submit();" />25 - 50 %
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="EuropeanPopGt50" onclick="this.form.submit();" />&gt; 50 %
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="filter_group">
                            <label for="show_criteria"><h4>@SearchAndFilter.SearchChooseCriteria</h4></span>
                            <input asp-for="Collapsible.Criteria" type="checkbox" class="collapse_checkbox" id="show_criteria" />
                            <div class="filter_criteria">
                                <ul>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Criterias.CriteriaA" onclick="this.form.submit();" />A - populasjonsreduksjon
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Criterias.CriteriaB" onclick="this.form.submit();" />B - lite areal
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Criterias.CriteriaC" onclick="this.form.submit();" />C - liten populasjon
                                        </label>
                                    </li>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="Criterias.CriteriaD" onclick="this.form.submit();" />D - svært liten populasjon eller forekomst
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="filter_group">
                            <label for="show_extinct"><h4>Trolig utdødd</h4></label>
                            <input asp-for="Collapsible.Extinct" type="checkbox" class="collapse_checkbox" id="show_extinct" />
                            <div class="filter_extinct">
                                <ul>
                                    <li class="checkbox">
                                        <label>
                                            <input type="checkbox" asp-for="PresumedExtinct" onclick="this.form.submit();" />Trolig utdødd
                                        </label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
