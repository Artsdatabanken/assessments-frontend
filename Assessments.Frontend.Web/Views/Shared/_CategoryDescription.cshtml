@model Artsdatabanken.RL2021
@{
    ViewBag.category = @Model.Kategori;
}

@*
    Codeblock from Innsynsløsninga 2021 by SN. 
    Slightly modified by HEM for launch.
*@



@functions {
    public string categoryMatcher(string category)
    {
        // Takes in category as presented in the model
        // Returns name of category (whyever for?)
        return category.Substring(0, 2);

    }
}

@functions {
    public string categoryDescription(string category)
    {
        // Takes in category as presented in the model
        // uses categoryMatcher to remove degrees etc.
        // Returns name of category (whatever for?)
        var actual_category = @categoryMatcher(category);


        if (actual_category == "CR")
        {
            return " - kritisk truet ";
        }
        else if (actual_category == "EN")
        {
            return " - sterkt truet ";
        }
        else if (actual_category == "VU")
        {
            return " - sårbar ";
        }
        else if (actual_category == "NT")
        {
            return " - nær truet ";
        }
        else if (actual_category == "DD")
        {
            return " - datamangel ";
        }
        else if (actual_category == "LC")
        {
            return " - livskraftig ";
        }
        else if (actual_category == "NA")
        {
            return " - ikke egnet ";
        }
        else if (actual_category == "NE")
        {
            return " - ikke vurdert ";
        }
        else if (actual_category == "RE")
        {
            return " - regionalt utdødd ";
        }
        else
        {
            return "";
        }
    }
}

<div class="page_section">
    <h3>
        Rødlistekategori: @categoryMatcher(@Model.Kategori) @categoryDescription(ViewBag.category)
        @if (@Model.Kategori == "CR" && @Model.TroligUtdodd == true)
        {
            <span>og arten er trolig utdødd</span>
        }
    </h3>

    @if (@ViewBag.glossary[@Model.Kategori]!= null)
    {   
    <p class="imaged_paragraph">
        <span class="graphic_element @Model.Kategori">
            @Model.Kategori
        </span>
        <span class="right_text">
            @ViewBag.glossary[@Model.Kategori]["tagline"]
            @ViewBag.glossary[@Model.Kategori]["description"]
        </span>
    </p>
    }



    @if (@Model.Kategori == "CR" && @Model.TroligUtdodd == true)
    {

        <p class="imaged_paragraph">
            <span class="graphic_element material-icons utdodd">
                <span  class="material-icons">image_search</span>
            </span>
            <span class="right_text">
                @ViewBag.glossary["TroligUtdodd"]["tagline"] @ViewBag.glossary["TroligUtdodd"]["description"]
            </span>
        </p>

    }
</div>