@model RL2021ViewModel
@using static Assessments.Frontend.Web.Infrastructure.Helpers


<!-- Data from model -->
@{
    Dictionary<string, Dictionary<string, string>> speciesgroup = ViewBag.speciesgroup.ToObject<Dictionary<string, Dictionary<string, string>>>();
}


<ul class="redlist" id="redlist">
    <li class="listheader" id="listheader">
        <span></span>
        <span class="list_cell">Artsnavn</span>
        <span class="list_cell">Popul√¶rnavn</span>
        <span class="list_cell">Kategori</span>
    </li>

    @if (Model.Redlist2021Results.Count > 0)
    {
        @foreach (var item in Model.Redlist2021Results)
        {
            string speciesgroupname = @item.SpeciesGroup.ToLower();
            <li class="list @speciesgroupname @item.AssessmentArea">
                <a asp-action="Detail" asp-route-id="@item.Id">
                    @{
                        // TODO: The number of fields contained in the box does not add up. Fix.
                        // Makes it very strange and overflowy in grid view.
                    }

                    <div class="svalbarcontainer">
                        <span class="svalbard">Svalbard</span>
                    </div>

                    <div class="element_icon list_cell">
                        @if (speciesgroup.ContainsKey(item.SpeciesGroup) && speciesgroup[item.SpeciesGroup]["image"] != null)
                        {
                            <img src="@speciesgroup[item.SpeciesGroup]["image"]" alt="@speciesgroupname"/>
                            <span class="speciesgroup_name">@speciesgroupname</span>
                        }
                    </div>


                    <span class="element_species">
                        <span class="element_scientific_name list_cell">@Html.Raw(FormatScientificNameElement(item.ScientificName))</span>
                        <span class="element_popular_name list_cell">@item.PopularName</span>
                    </span>

                    <span class="list_cell categoryname capitalized">
                        @if (!string.IsNullOrEmpty(item.Category))
                        {
                            @ViewBag.categories[item.Category.Substring(0, 2)]["presentationstring"];
                            <span class="degrees">@Helpers.FindDegrees(item.Category, false)</span>

                        }
                    </span>

                    <span class="list_cell categorytag">
                        <span class="@item.Category.Substring(0,2) category_tag">
                            <span class="category_tag_label">@item.Category</span>
                        </span>
                    </span>

                </a>
            </li>
        }
    }
    else
    {
        <div class="no_results mobile_padding">@ViewBag.glossary["oneliners"]["noResults"]</div>
    }
</ul>

<div class="mobile_padding">
    <partial name="/Views/Redlist/Species/2021/List/partials/_Paginator.cshtml" />
</div>