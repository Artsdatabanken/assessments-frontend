@model Artsdatabanken.RL2021
@* SEE example by searching species Carex elata *@

@{
    Artsdatabanken.RL2021 assessment = Model;


}


@functions{
    public bool gjeldende(string criteria)
    {
        var start = criteria.ElementAt(0);
        var rest = criteria.Substring(1, criteria.Length - 1);
        var kriterier = Model.Kriterier.Split(";");
        if (Model.Kriterier.IndexOf(criteria) >= 0)
        {
            return true;
        }

        for (var i = 0; i < kriterier.Length; i++)
        {
            if (kriterier[i].StartsWith(start) && kriterier[i].IndexOf(rest) >= 0)
            {
                return true;
            }
        }

        return false;
    }

}



<div class="section">
    <h2>Kriterier</h2>

    <h3> A-kriterie</h3>
    <!-- A KRITERIE -->

    <partial name="/Views/Test/partials_2021/Kriterier_2021/_Kriterie_Automatic.cshtml" />




    @if (!string.IsNullOrEmpty(Model.OppsummeringAKriterier) && Model.Kriterier.IndexOf("A") >= 0)
    {
        <div class="criterium">
            @if (gjeldende("A1") && (!string.IsNullOrEmpty(Model.A1OpphørtOgReversibel) || Model.A1EndringBasertpåKode.Count > 0 || !string.IsNullOrEmpty(Model.A1OpphørtOgReversibelAntatt.Max) || !string.IsNullOrEmpty(Model.A1OpphørtOgReversibelAntatt.Min) || !string.IsNullOrEmpty(Model.A1OpphørtOgReversibelAntatt.Probable)))
            {

                @*// TODO FIX:
                    MMP("A1", "Reduksjon de siste 10 år/3 generasjoner hvor årsaken er både opphørt, 
                    forstått og reversibel", Model.A1OpphørtOgReversibelAntatt);
                *@
                <dl class="responsive condenced width40">


                    @* // TODO FIX:
                        @{CondDT("A1 reduksjon", A1def(Model.A1OpphørtOgReversibel));}
                    *@
                    @if (Model.A1EndringBasertpåKode.Count > 0)
                    {
                        <div>Vurderingen er basert på:</div>
                        @foreach (var s in Model.A1EndringBasertpåKode)
                        {
                            <div style="margin-left: 30px">-  @*// TODO @A1basertdef(s)*@</div>
                        }
                    }

                </dl>
                <partial name="/Views/Shared/_CatLine.cshtml" , model=Model.A1OpphørtOgReversibel />

            }


            @if (gjeldende("A2") && (!string.IsNullOrEmpty(Model.A2Forutgående10År) || Model.A2EndringBasertpåKode.Count > 0))
            {
                @*// TODO FIX:
                    MMP("A2", "Reduksjon de siste 10 år/3 generasjoner", Model.A2Forutgående10ÅrAntatt);
                *@
                <dl class="responsive condenced width40">

                    @* // TODO
                        @{CondDT("A2 reduksjon", A2def(Model.A2Forutgående10År));
                        }
                    *@


                    @if (Model.A2EndringBasertpåKode.Count > 0)
                    {
                        <div>Vurderingen er basert på:</div>
                        @foreach (var s in Model.A2EndringBasertpåKode)
                        {
                            <div>A2basertdef</div>
                            @*// TODO
                                <div style="margin-left: 30px">- @A2basertdef(s)</div>*@
                        }
                    }

                </dl>
                <partial name="/Views/Shared/_CatLine.cshtml" , model=Model.A2Forutgående10År />
            }


            @{
                ViewData["tag"] = "A3";
                ViewData["desc"] = "Framtidig reduksjon kommende 10 år/3 generasjoner";
                ViewData["condt"] = "A3";
            }

            @if (gjeldende("A3") && (!string.IsNullOrEmpty(Model.A3Kommende10År) || Model.A3EndringBasertpåKode.Count > 0))
            {
                <partial name="/Views/Shared/_MMP.cshtml" model=Model.A3Kommende10ÅrAntatt view-data="ViewData" />

                <div class="responsive condenced width40">
                    @*// TODO
                        @{CondDT("A3 reduksjon", A3def(Model.A3Kommende10År));}
                    *@
                    @if (Model.A3EndringBasertpåKode.Count > 0)
                    {
                        <div>Vurderingen er basert på:</div>
                        @foreach (var s in Model.A3EndringBasertpåKode)
                        {
                            <div style="margin-left: 30px">- @*// TODO @A3basertdef(s)*@</div>
                        }

                    }

                </div>
                <partial name="/Views/Shared/_CatLine.cshtml" , model=Model.A3Kommende10År />
            }



            @if (gjeldende("A4") && (!string.IsNullOrEmpty(Model.A4Intervall10År) && Model.A4EndringBasertpåKode.Count > 0))
            {
                @*// TODO FIX:
                    MMP("A4", "Pågående reduksjon over 10 år/3 generasjoner som inkluderer både fortid og framtid", Model.A4Intervall10ÅrAntatt);*@
                <dl class="responsive condenced width40">
                    @*//TODO
                        @{CondDT("A4 reduksjon", A4def(Model.A4Intervall10År));}*@

                    @if (Model.A4EndringBasertpåKode.Count > 0)
                    {
                        <div>Vurderingen er basert på:</div>
                        @foreach (var s in Model.A4EndringBasertpåKode)
                        {

                            <div style="margin-left: 30px">- @*// TODO @A4basertdef(s)*@</div>
                        }
                    }

                </dl>
                <partial name="/Views/Shared/_CatLine.cshtml" , model=Model.A4Intervall10År />
            }

        </div>


    }



</div><!-- End section -->