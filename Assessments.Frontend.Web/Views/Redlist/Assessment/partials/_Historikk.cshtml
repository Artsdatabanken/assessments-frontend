@model SpeciesAssessment2021

@functions{
    public string categoryDescription(string category)
    {
        // Takes in category as presented in the model
        // uses categoryMatcher to remove degrees etc.
        // Returns name of category (whatever for?)
        var actual_category = category.Substring(0, 2);
        var final_string = @ViewBag.categories[actual_category]["presentationstring"];
        return final_string;
    }
}

<h3>Historikk</h3>
<ul class="history_list">

    <li>
        <span class="text_content">
            <h4>2021</h4>
            <partial name="/Views/Shared/_CategoryTags.cshtml" />
            @if (Model.YearPreviousAssessment == 2021 || Model.YearPreviousAssessment == 0)
            {
                <span>Arten er vurdert for første gang i 2021.</span>
            }
        </span>
    </li>


    @if (!string.IsNullOrWhiteSpace(Model.ImportInfo.Kategori2015))
    {
        <li class="withlink">
            <span class="text_content">
            <h4>Rødlista 2015</h4>
            <span class="graphic_element @Model.ImportInfo.Kategori2015">@Model.ImportInfo.Kategori2015</span>
            <b> @categoryDescription(Model.ImportInfo.Kategori2015)</b> 
            </span>
            <a target="_blank" href="@Model.ImportInfo.Url2015">
                Gå til vurdering<span class="material-icons">open_in_new</span>
            </a>
        </li>
    }

    @if (!string.IsNullOrWhiteSpace(Model.ImportInfo.Kategori2010))
    {
    <li class="withlink">
        <span class="text_content">
            <h4>Rødlista 2010</h4>
            <span class="graphic_element @Model.ImportInfo.Kategori2010">@Model.ImportInfo.Kategori2010</span>
            <b> @categoryDescription(Model.ImportInfo.Kategori2010)</b>

        </span>
        <a target="_blank" href="@Model.ImportInfo.Url2010">
            Gå til vurdering<span class="material-icons">open_in_new</span>
        </a>
    </li>
    }
</ul>